<%- include('../layouts/schooladmin', { body: `
<div class="d-flex justify-content-between align-items-center mb-4">
  <h4 class="mb-0">School Classes</h4>
  <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addClassModal">
    <i class="bi bi-journal-plus me-2"></i>Add Class
  </button>
</div>

<!-- Classes Grid -->
<div class="row g-4">
  ${classes && classes.length > 0 ? classes.map(cls => '<div class="col-md-6 col-lg-4"><div class="card h-100"><div class="card-body"><h5 class="card-title">' + cls.name + '</h5><p class="text-muted mb-2"><i class="bi bi-book me-1"></i>' + (cls.subject?.name || 'General') + '</p>' + (cls.gradeLevel ? '<p class="mb-2"><span class="badge bg-info"><i class="bi bi-mortarboard-fill me-1"></i>Grade ' + cls.gradeLevel + '</span></p>' : '') + '<div class="d-flex gap-3 mb-3"><span class="badge bg-primary"><i class="bi bi-person-workspace me-1"></i>' + (cls.teachers?.length || 0) + ' Teachers</span><span class="badge bg-success"><i class="bi bi-people me-1"></i>' + (cls.students?.length || 0) + ' Students</span></div><div class="d-flex gap-2"><button class="btn btn-sm btn-outline-primary flex-grow-1"><i class="bi bi-eye me-1"></i>View</button><button class="btn btn-sm btn-outline-secondary"><i class="bi bi-pencil"></i></button></div></div></div></div>').join('') : '<div class="col-12"><div class="card"><div class="card-body text-center py-5"><i class="bi bi-journal-x fs-1 text-muted mb-3 d-block"></i><h5 class="text-muted">No Classes Found</h5><p class="text-muted">Create your first class to get started</p><button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addClassModal"><i class="bi bi-plus me-2"></i>Create Class</button></div></div></div>'}
</div>

<!-- Add Class Modal -->
<div class="modal fade" id="addClassModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Add New Class</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <form>
          <div class="mb-3">
            <label class="form-label">Class Name</label>
            <input type="text" class="form-control" placeholder="e.g., Algebra I - Period 3" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Subject</label>
            <select class="form-select" required>
              <option value="">Select a subject...</option>
              <option value="math">Mathematics</option>
              <option value="science">Science</option>
              <option value="english">English Language Arts</option>
              <option value="history">History & Social Studies</option>
            </select>
          </div>
          <div class="mb-3">
            <label class="form-label">Grade Level</label>
            <select class="form-select">
              ${[...Array(12)].map((_, i) => '<option value="' + (i + 1) + '">Grade ' + (i + 1) + '</option>').join('')}
            </select>
          </div>
          <div class="mb-3">
            <label class="form-label">Description</label>
            <textarea class="form-control" rows="2"></textarea>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary">Create Class</button>
      </div>
    </div>
  </div>
</div>
`, activePage: 'classes', pageTitle: 'Classes Management' }) %>
