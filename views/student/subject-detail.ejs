<%- include('../layouts/student', { body: `
<!-- Breadcrumb -->
<nav aria-label="breadcrumb" class="mb-4">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="${typeof basePath !== 'undefined' ? basePath : ''}/student/subjects">Subjects</a></li>
    <li class="breadcrumb-item active">${category.name}</li>
  </ol>
</nav>

<!-- Category Header -->
<div class="card mb-4" style="background: linear-gradient(135deg, ${category.color || '#0ea5e9'}20 0%, ${category.color || '#0ea5e9'}10 100%);">
  <div class="card-body p-4">
    <div class="row align-items-center">
      <div class="col-auto">
        <div style="width: 80px; height: 80px; border-radius: 20px; background: white; display: flex; align-items: center; justify-content: center; font-size: 2.5rem; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
          ${category.icon || '&#x1F4DA;'}
        </div>
      </div>
      <div class="col">
        <h2 class="mb-1">${category.name}</h2>
        <p class="text-muted mb-0">${category.description || 'Explore topics and start learning'}</p>
      </div>
      <div class="col-auto">
        <a href="${typeof basePath !== 'undefined' ? basePath : ''}/student/tutor?subjectId=${category.subjects?.[0]?.id || ''}" class="btn btn-primary btn-lg">
          <i class="bi bi-play-fill me-2"></i>Start Learning
        </a>
      </div>
    </div>
  </div>
</div>

<!-- Grade Filter Info -->
<div class="alert alert-info d-flex align-items-center mb-4">
  <i class="bi bi-info-circle me-2"></i>
  <div>
    <strong>Your Grade Level:</strong> ${typeof studentGradeLabel !== 'undefined' ? studentGradeLabel : 'Not set'}
    <span class="ms-3"><span class="badge bg-success me-1">Your Level</span> <span class="badge bg-warning text-dark me-1">Advanced</span> <span class="badge bg-secondary">Below Level</span></span>
  </div>
</div>

<!-- Subjects List -->
<div class="row g-4">
  ${category.subjects && category.subjects.map(subject => '<div class="col-md-6"><div class="card h-100"><div class="card-header bg-white"><h5 class="mb-0"><i class="bi bi-book me-2"></i>' + subject.name + '</h5><small class="text-muted">' + (subject.gradeRange ? 'Grades ' + subject.gradeRange : '') + '</small></div><div class="card-body"><p class="text-muted small mb-3">' + (subject.description || 'Explore topics in ' + subject.name) + '</p>' + (subject.topics && subject.topics.length > 0 ? '<div class="list-group list-group-flush">' + subject.topics.map(topic => '<a href="' + (typeof basePath !== 'undefined' ? basePath : '') + '/student/topics/' + topic.id + '" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center' + (topic.isAdvanced ? ' bg-warning bg-opacity-10' : '') + (topic.isBelow ? ' bg-secondary bg-opacity-10' : '') + '"><div><i class="bi bi-journal-text me-2 ' + (topic.isAdvanced ? 'text-warning' : 'text-primary') + '"></i>' + topic.name + (topic.isAdvanced ? '<span class="badge bg-warning text-dark ms-2">Advanced</span>' : '') + (topic.isBelow ? '<span class="badge bg-secondary ms-2">Review</span>' : '') + '</div><div class="d-flex align-items-center gap-2">' + (topic.gradeLabel ? '<small class="text-muted">' + topic.gradeLabel + '</small>' : '') + '<i class="bi bi-chevron-right text-muted"></i></div></a>').join('') + '</div>' : '<p class="text-muted text-center py-3"><i class="bi bi-inbox me-2"></i>No topics available</p>') + '</div><div class="card-footer bg-white"><a href="' + (typeof basePath !== 'undefined' ? basePath : '') + '/student/tutor?subjectId=' + subject.id + '" class="btn btn-outline-primary btn-sm"><i class="bi bi-chat-dots me-1"></i>General Help</a></div></div></div>').join('') || '<div class="col-12"><div class="text-center py-5 text-muted"><i class="bi bi-inbox fs-1 d-block mb-3"></i><p>No subjects available in this category.</p></div></div>'}
</div>
`, activePage: 'subjects', pageTitle: category.name }) %>
