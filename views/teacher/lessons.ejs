<%- include('../layouts/teacher', { body: `
<!-- Page Header -->
<div class="d-flex justify-content-between align-items-center mb-4">
  <div>
    <h4 class="mb-1"><i class="bi bi-journal-text me-2"></i>My Lessons</h4>
    <p class="text-muted mb-0">Create and manage lesson content for your students</p>
  </div>
  <a href="${typeof basePath !== 'undefined' ? basePath : ''}/teacher/lessons/create" class="btn btn-primary">
    <i class="bi bi-plus-lg me-2"></i>Create Lesson
  </a>
</div>

<!-- Lessons Grid -->
${lessons && lessons.length > 0 ? '<div class="row g-4">' + lessons.map(lesson => '<div class="col-md-6 col-lg-4"><div class="card h-100"><div class="card-header bg-white d-flex justify-content-between align-items-start"><div><h6 class="mb-1">' + lesson.title + '</h6><small class="text-muted">' + (lesson.topic?.subject?.name || 'No subject') + ' &bull; ' + (lesson.topic?.name || 'No topic') + '</small></div><div class="dropdown"><button class="btn btn-sm btn-light" data-bs-toggle="dropdown"><i class="bi bi-three-dots-vertical"></i></button><ul class="dropdown-menu dropdown-menu-end"><li><a class="dropdown-item" href="' + (typeof basePath !== 'undefined' ? basePath : '') + '/teacher/lessons/' + lesson.id + '"><i class="bi bi-eye me-2"></i>View</a></li><li><a class="dropdown-item" href="' + (typeof basePath !== 'undefined' ? basePath : '') + '/teacher/lessons/' + lesson.id + '/edit"><i class="bi bi-pencil me-2"></i>Edit</a></li><li><hr class="dropdown-divider"></li><li><form action="' + (typeof basePath !== 'undefined' ? basePath : '') + '/teacher/lessons/' + lesson.id + '/delete" method="POST" onsubmit="return confirm(\\'Delete this lesson?\\');"><button type="submit" class="dropdown-item text-danger"><i class="bi bi-trash me-2"></i>Delete</button></form></li></ul></div></div><div class="card-body"><p class="text-muted small mb-3">' + (lesson.description || 'No description') + '</p><div class="d-flex gap-2 flex-wrap">' + (lesson.gradeLevel !== null ? '<span class="badge bg-primary">Grade ' + lesson.gradeLevel + '</span>' : '') + (lesson.duration ? '<span class="badge bg-secondary">' + lesson.duration + ' min</span>' : '') + (lesson.class ? '<span class="badge bg-info">' + lesson.class.name + '</span>' : '<span class="badge bg-light text-dark">All Classes</span>') + '<span class="badge bg-success">' + (lesson.assignments?.length || 0) + ' assignments</span></div></div><div class="card-footer bg-white"><small class="text-muted">Created ' + new Date(lesson.createdAt).toLocaleDateString() + '</small></div></div></div>').join('') + '</div>' : '<div class="text-center py-5"><div class="mb-4"><i class="bi bi-journal-text fs-1 text-muted"></i></div><h5>No Lessons Yet</h5><p class="text-muted mb-4">Create your first lesson to share content with your students.</p><a href="' + (typeof basePath !== 'undefined' ? basePath : '') + '/teacher/lessons/create" class="btn btn-primary"><i class="bi bi-plus-lg me-2"></i>Create Your First Lesson</a></div>'}
`, activePage: 'lessons', pageTitle: 'Lessons' }) %>
