<%- include('../layouts/principal', { body: `
<div class="d-flex justify-content-between align-items-center mb-4">
  <h4 class="mb-0">All Classes</h4>
  <span class="badge bg-primary fs-6">${classes?.length || 0} Classes</span>
</div>

<div class="card">
  <div class="card-body p-0">
    <div class="table-responsive">
      <table class="table table-hover mb-0">
        <thead class="bg-light">
          <tr>
            <th>Class Name</th>
            <th>Subject</th>
            <th>Teacher(s)</th>
            <th>Students</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          ${classes && classes.length > 0 ? classes.map(cls => {
            const teacherNames = cls.teachers && cls.teachers.length > 0 ?
              cls.teachers.map(t => t.teacher.firstName + ' ' + t.teacher.lastName).join(', ') :
              'No Teacher';
            const studentCount = cls.students?.length || 0;
            return '<tr>' +
              '<td><strong>' + cls.name + '</strong></td>' +
              '<td>' + (cls.subject?.name || 'No Subject') + '</td>' +
              '<td>' + teacherNames + '</td>' +
              '<td><span class="badge bg-secondary">' + studentCount + '</span></td>' +
              '<td><a href="' + (typeof basePath !== 'undefined' ? basePath : '') + '/principal/classes/' + cls.id + '" class="btn btn-sm btn-outline-primary"><i class="bi bi-eye me-1"></i>View</a></td>' +
            '</tr>';
          }).join('') : '<tr><td colspan="5" class="text-center text-muted py-4"><i class="bi bi-inbox fs-1 d-block mb-2"></i>No classes found</td></tr>'}
        </tbody>
      </table>
    </div>
  </div>
</div>
`, activePage: 'classes', pageTitle: 'Classes' }) %>
